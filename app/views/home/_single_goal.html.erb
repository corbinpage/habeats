<div class="<%= g.theme %>">
  <h3><%= g.name %></h3>
  <div>
    <div style="display:inline">
      <p>M</p>
      <p>W</p>
      <p>F</p>
      <p>S</p>
    </div>
    <svg width="144" height="1000">
      <g transform="translate(0, 0)">
        <% week_counter = 0 %>
        <% g.days.each_with_index do |d,i| %>
        <% week_counter = (d.dofw == 7 ? week_counter+=1 : week_counter) %>
        <%= ((d.dofw == 7 || i == 0) ? "<g transform='translate(0, 0)'>" : "") %>
        <rect class="day" width="15" height="15" x="<%= 18 * d.dofw %>" y="<%= 18 * week_counter %>" fill="<%= d.range_color%>" data-count="<%= d.score%>" data-date="<%= d.date %>"></rect>
        <%= ((d.dofw == 7 || i == 0) ? "</g>" : "") %>
        <% end %>
      </g>
    </svg>
  </div>
</div>